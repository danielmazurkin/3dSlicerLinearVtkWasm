!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.itk=t():e.itk=t()}(self,(()=>(()=>{var e={806:(e,t,n)=>{e.exports=n(642)},107:(e,t,n)=>{"use strict";var r=n(320),a=n(135),o=n(448),i=n(610),s=n(28),l=n(77),u=n(734),c=n(226),p=n(285),f=n(7);e.exports=function(e){return new Promise((function(t,n){var d,m=e.data,h=e.headers,y=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(m)&&delete h["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(w+":"+v)}var I=s(e.baseURL,e.url);function T(){if(b){var r="getAllResponseHeaders"in b?l(b.getAllResponseHeaders()):null,o={data:y&&"text"!==y&&"json"!==y?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};a((function(e){t(e),g()}),(function(e){n(e),g()}),o),b=null}}if(b.open(e.method.toUpperCase(),i(I,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=T:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(T)},b.onabort=function(){b&&(n(c("Request aborted",e,"ECONNABORTED",b)),b=null)},b.onerror=function(){n(c("Network Error",e,null,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||p.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||u(I))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;k&&(h[e.xsrfHeaderName]=k)}"setRequestHeader"in b&&r.forEach(h,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete h[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),y&&"json"!==y&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){b&&(n(!e||e&&e.type?new f("canceled"):e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),m||(m=null),b.send(m)}))}},642:(e,t,n)=>{"use strict";var r=n(320),a=n(692),o=n(108),i=n(163),s=function e(t){var n=new o(t),s=a(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(i(t,n))},s}(n(285));s.Axios=o,s.Cancel=n(7),s.CancelToken=n(476),s.isCancel=n(874),s.VERSION=n(37).version,s.all=function(e){return Promise.all(e)},s.spread=n(166),s.isAxiosError=n(99),e.exports=s,e.exports.default=s},7:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},476:(e,t,n)=>{"use strict";var r=n(7);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},874:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},108:(e,t,n)=>{"use strict";var r=n(320),a=n(610),o=n(60),i=n(756),s=n(163),l=n(375),u=l.validators;function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var a,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var c=[i,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(o),a=Promise.resolve(e);c.length;)a=a.then(c.shift(),c.shift());return a}for(var p=e;n.length;){var f=n.shift(),d=n.shift();try{p=f(p)}catch(e){d(e);break}}try{a=i(p)}catch(e){return Promise.reject(e)}for(;o.length;)a=a.then(o.shift(),o.shift());return a},c.prototype.getUri=function(e){return e=s(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},60:(e,t,n)=>{"use strict";var r=n(320);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},28:(e,t,n)=>{"use strict";var r=n(900),a=n(787);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},226:(e,t,n)=>{"use strict";var r=n(669);e.exports=function(e,t,n,a,o){var i=new Error(e);return r(i,t,n,a,o)}},756:(e,t,n)=>{"use strict";var r=n(320),a=n(725),o=n(874),i=n(285),s=n(7);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return l(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(l(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},669:e=>{"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},163:(e,t,n)=>{"use strict";var r=n(320);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function i(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function l(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var u={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,a=t(e);r.isUndefined(a)&&t!==l||(n[e]=a)})),n}},135:(e,t,n)=>{"use strict";var r=n(226);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},725:(e,t,n)=>{"use strict";var r=n(320),a=n(285);e.exports=function(e,t,n){var o=this||a;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},285:(e,t,n)=>{"use strict";var r=n(320),a=n(554),o=n(669),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(107)),l),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(i)})),e.exports=u},37:e=>{e.exports={version:"0.23.0"}},692:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},610:(e,t,n)=>{"use strict";var r=n(320);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(a(t)+"="+a(e))})))})),o=i.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},787:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},448:(e,t,n)=>{"use strict";var r=n(320);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},900:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},99:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e){return"object"===t(e)&&!0===e.isAxiosError}},734:(e,t,n)=>{"use strict";var r=n(320);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},554:(e,t,n)=>{"use strict";var r=n(320);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},77:(e,t,n)=>{"use strict";var r=n(320),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,i={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(i[t]&&a.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},166:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},375:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var a=n(37).version,o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return r(n)===e||"a"+(t<1?"n ":" ")+e}}));var i={};o.transitional=function(e,t,n){function r(e,t){return"[Axios v"+a+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,a,o){if(!1===e)throw new Error(r(a," has been removed"+(t?" in "+t:"")));return t&&!i[a]&&(i[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,o)}},e.exports={assertOptions:function(e,t,n){if("object"!==r(e))throw new TypeError("options must be an object");for(var a=Object.keys(e),o=a.length;o-- >0;){var i=a[o],s=t[i];if(s){var l=e[i],u=void 0===l||s(l,i,e);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:o}},320:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var a=n(692),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function s(e){return void 0===e}function l(e){return null!==e&&"object"===r(e)}function u(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===o.call(e)}function p(e,t){if(null!=e)if("object"!==r(e)&&(e=[e]),i(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)p(arguments[r],n);return t},extend:function(e,t,n){return p(t,(function(t,r){e[r]=n&&"function"==typeof t?a(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},519:e=>{function t(e,t){if(!(e instanceof Blob))throw new TypeError("Must be a File or Blob");return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){n(e.target.result)},a.onerror=function(t){r(new Error("Error reading"+e.name+": "+t.target.result))},a["readAs"+t](e)}))}e.exports={readAsDataURL:function(e){return t(e,"DataURL")},readAsText:function(e){return t(e,"Text")},readAsArrayBuffer:function(e){return t(e,"ArrayBuffer")}}},444:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(e,t)||l(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){if(Array.isArray(e))return e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||u(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(b,e);var t,n,r,c,d=(r=b,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(c){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=d.call(this))._messageId=1,t._messages=new Map,t._worker=e,t._worker.onmessage=t._onMessage.bind(y(t)),t._id=Math.ceil(1e7*Math.random()),t}return t=b,n=[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return 0===this._messages.size}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;return new Promise((function(o,i){var s=t._messageId++;t._messages.set(s,[o,i,a]),t._worker.postMessage([s,n,e],r||[])}))}},{key:"postMessage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return new Promise((function(a,o){var i=e._messageId++;e._messages.set(i,[a,o,r]),e._worker.postMessage([i,t],n||[])}))}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._worker.postMessage({eventName:e,args:n})}},{key:"_onMessage",value:function(e){var t;if(!Array.isArray(e.data)&&e.data.eventName)return(t=f(g(b.prototype),"emit",this)).call.apply(t,[this,e.data.eventName].concat(s(e.data.args)));var n,r=i(n=e.data)||u(n)||l(n)||o(),a=r[0],c=r.slice(1);if(1===a)this._onEvent.apply(this,s(c));else{if(0!==a)throw new Error("Wrong message type '".concat(a,"'"));this._onResult.apply(this,s(c))}}},{key:"_onResult",value:function(e,t,n){var r=a(this._messages.get(e),2),o=r[0],i=r[1];return this._messages.delete(e),1===t?o(n):i(n)}},{key:"_onEvent",value:function(e,t,n){var r=a(this._messages.get(e),3)[2];r&&r(t,n)}}],n&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),b}(n(539));e.exports=b},539:e=>{function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}var n,a;return n=e,a=[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o,i=t(this.__listeners[e]);try{for(i.s();!(o=i.n()).done;){var s=o.value;s.apply(void 0,r)}}catch(e){i.e(e)}finally{i.f()}return this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){n.off(e,r),t.apply(void 0,arguments)}))}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}],a&&r(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),e}();e.exports=a}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.u=e=>e+".itk-wasm.min.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href;var r={};return(()=>{"use strict";n.r(r),n.d(r,{FloatTypes:()=>s,IOTypes:()=>l,Image:()=>d,ImageType:()=>f,IntTypes:()=>i,InterfaceTypes:()=>o,Mesh:()=>h,MeshType:()=>m,PixelTypes:()=>u,PolyData:()=>g,PolyDataType:()=>y,WorkerPool:()=>O,bufferToTypedArray:()=>b,castImage:()=>k,copyImage:()=>w,extensionToImageIO:()=>U,extensionToMeshIO:()=>M,getFileExtension:()=>_,getMatrixElement:()=>c,getPipelineWorkerUrl:()=>A,getPipelinesBaseUrl:()=>C,imageSharedBufferOrCopy:()=>T,itkConfig:()=>t,meshToPolyData:()=>me,polyDataToMesh:()=>he,readArrayBuffer:()=>W,readBlob:()=>q,readDICOMTags:()=>ne,readDICOMTagsArrayBuffer:()=>te,readFile:()=>Z,readImageArrayBuffer:()=>z,readImageBlob:()=>J,readImageDICOMArrayBufferSeries:()=>ie,readImageDICOMFileSeries:()=>se,readImageFile:()=>G,readImageFileSeries:()=>Y,readImageHTTP:()=>ee,readMeshArrayBuffer:()=>R,readMeshBlob:()=>V,readMeshFile:()=>H,runPipeline:()=>xe,runPipelineBrowser:()=>xe,setMatrixElement:()=>p,setPipelineWorkerUrl:()=>P,setPipelinesBaseUrl:()=>B,stackImages:()=>v,version:()=>a,writeArrayBuffer:()=>de,writeImageArrayBuffer:()=>ce,writeMeshArrayBuffer:()=>fe});const e="1.0.0-b.83",t={pipelineWorkerUrl:"https://cdn.jsdelivr.net/npm/itk-wasm@".concat(e,"/dist/web-workers/min-bundles/pipeline.worker.js"),imageIOUrl:"https://cdn.jsdelivr.net/npm/itk-image-io@".concat(e),meshIOUrl:"https://cdn.jsdelivr.net/npm/itk-mesh-io@".concat(e),pipelinesUrl:"https://cdn.jsdelivr.net/npm/itk-wasm@".concat(e,"/dist/pipelines")},a="1.0.0-b.83",o={TextFile:"InterfaceTextFile",BinaryFile:"InterfaceBinaryFile",TextStream:"InterfaceTextStream",BinaryStream:"InterfaceBinaryStream",Image:"InterfaceImage",Mesh:"InterfaceMesh",PolyData:"InterfacePolyData",JsonObject:"InterfaceJsonObject"},i={Int8:"int8",UInt8:"uint8",Int16:"int16",UInt16:"uint16",Int32:"int32",UInt32:"uint32",Int64:"int64",UInt64:"uint64",SizeValueType:"uint64",IdentifierType:"uint64",IndexValueType:"int64",OffsetValueType:"int64"},s={Float32:"float32",Float64:"float64",SpacePrecisionType:"float64"},l={Text:"Text",Binary:"Binary",Image:"Image",Mesh:"Mesh"},u={Unknown:"Unknown",Scalar:"Scalar",RGB:"RGB",RGBA:"RGBA",Offset:"Offset",Vector:"Vector",Point:"Point",CovariantVector:"CovariantVector",SymmetricSecondRankTensor:"SymmetricSecondRankTensor",DiffusionTensor3D:"DiffusionTensor3D",Complex:"Complex",FixedArray:"FixedArray",Array:"Array",Matrix:"Matrix",VariableLengthVector:"VariableLengthVector",VariableSizeMatrix:"VariableSizeMatrix"},c=function(e,t,n,r){return e[r+n*t]},p=function(e,t,n,r,a){e[r+n*t]=a},f=class{constructor(e=2,t=i.UInt8,n=u.Scalar,r=1){this.dimension=e,this.componentType=t,this.pixelType=n,this.components=r}},d=class{constructor(e=new f){this.imageType=e,this.name="image";const t=e.dimension;this.origin=new Array(t),this.origin.fill(0),this.spacing=new Array(t),this.spacing.fill(1),this.direction=new Float64Array(t*t),this.direction.fill(0);for(let e=0;e<t;e++)p(this.direction,t,e,e,1);this.size=new Array(t),this.size.fill(0),this.metadata=new Map,this.data=null}},m=class{constructor(e=2,t=s.Float32,n=s.Float32,r=u.Scalar,a=1,o=i.Int32,l=s.Float32,c=u.Scalar,p=1){this.dimension=e,this.pointComponentType=t,this.pointPixelComponentType=n,this.pointPixelType=r,this.pointPixelComponents=a,this.cellComponentType=o,this.cellPixelComponentType=l,this.cellPixelType=c,this.cellPixelComponents=p}},h=class{constructor(e=new m){this.mt=e,this.name="mesh",this.meshType=e,this.name="mesh",this.numberOfPoints=0,this.points=null,this.numberOfPointPixels=0,this.pointData=null,this.numberOfCells=0,this.cellBufferSize=0,this.cells=null,this.numberOfCellPixels=0,this.cellData=null}},y=class{constructor(e=s.Float32,t=u.Scalar,n=1,r=s.Float32,a=u.Scalar,o=1){this.pointPixelComponentType=e,this.pointPixelType=t,this.pointPixelComponents=n,this.cellPixelComponentType=r,this.cellPixelType=a,this.cellPixelComponents=o}},g=class{constructor(e=new y){this.polyDataType=e,this.name="PolyData",this.polyDataType=e,this.name="PolyData",this.numberOfPoints=0,this.points=new Float32Array,this.verticesBufferSize=0,this.vertices=null,this.linesBufferSize=0,this.lines=null,this.polygonsBufferSize=0,this.polygons=null,this.triangleStripsBufferSize=0,this.triangleStrips=null,this.numberOfPointPixels=0,this.pointData=null,this.numberOfCellPixels=0,this.cellData=null}},b=function(e,t){let n=null;switch(e){case i.UInt8:n=new Uint8Array(t);break;case i.Int8:n=new Int8Array(t);break;case i.UInt16:n=new Uint16Array(t);break;case i.Int16:n=new Int16Array(t);break;case i.UInt32:n=new Uint32Array(t);break;case i.Int32:n=new Int32Array(t);break;case i.UInt64:n="function"==typeof globalThis.BigUint64Array?new BigUint64Array(t):new Uint8Array(t);break;case i.Int64:n="function"==typeof globalThis.BigInt64Array?new BigInt64Array(t):new Uint8Array(t);break;case s.Float32:n=new Float32Array(t);break;case s.Float64:n=new Float64Array(t);break;case"null":case null:n=null;break;default:throw new Error("Type is not supported as a TypedArray")}return n},w=function(e){const t=new d(e.imageType);if(t.name=e.name,t.origin=Array.from(e.origin),t.spacing=Array.from(e.spacing),t.direction=e.direction.slice(),t.size=Array.from(e.size),null!==e.data){const n=e.data.constructor;t.data=new n(e.data.length),null!=t.data&&t.data.set(e.data,0)}return t},v=function(e){if(e.length<1)throw Error("At least one images is required.");const t=e[0];if(null===t.data)throw Error("Image data is null.");const n=new d(t.imageType);n.origin=Array.from(t.origin),n.spacing=Array.from(t.spacing);const r=n.imageType.dimension;n.direction=t.direction.slice();const a=r-1;n.size=Array.from(t.size);const o=e.reduce(((e,t)=>e+t.size[a]),0);n.size[a]=o;const i=n.size.reduce(((e,t)=>e*t),1)*n.imageType.components,s=t.data.constructor;n.data=new s(i);let l=n.imageType.components;for(let e=0;e<n.size.length-1;e++)l*=n.size[e];let u=0;if(null==n.data)throw Error("Could not create result image data.");for(let t=0;t<e.length;t++)n.data.set(e[t].data,l*u),u+=e[t].size[a];return n},I="function"==typeof globalThis.SharedArrayBuffer,T=function(e){if(null===e.data)return e;if(I){if(e.data.buffer instanceof SharedArrayBuffer)return e;const t=new SharedArrayBuffer(e.data.buffer.byteLength),n=new(0,e.data.constructor)(t);return null!==n&&n.set(e.data,0),e.data=n,e}return w(e)},k=function(e,t){const n=Object.assign({},e.imageType);if(void 0!==t&&void 0!==t.pixelType&&(n.pixelType=t.pixelType,t.pixelType===u.Scalar&&1!==n.components))throw new Error("Cannot cast multi-component image to a scalar image");void 0!==t&&void 0!==t.componentType&&t.componentType!==e.imageType.componentType&&(n.componentType=t.componentType);const r=new d(n);if(r.name=e.name,r.origin=Array.from(e.origin),r.spacing=Array.from(e.spacing),r.direction=e.direction.slice(),r.size=Array.from(e.size),r.metadata=new Map(JSON.parse(JSON.stringify(Array.from(e.metadata)))),null!==e.data)if(void 0!==t&&void 0!==t.componentType&&t.componentType!==e.imageType.componentType)switch(e.imageType.componentType){case i.UInt8:case i.Int8:case i.UInt16:case i.Int16:case i.UInt32:case i.Int32:case s.Float32:case s.Float64:switch(r.imageType.componentType){case i.UInt8:r.data=new Uint8Array(e.data);break;case i.Int8:r.data=new Int8Array(e.data);break;case i.UInt16:r.data=new Uint16Array(e.data);break;case i.Int16:r.data=new Int16Array(e.data);break;case i.UInt32:r.data=new Uint32Array(e.data);break;case i.Int32:r.data=new Int32Array(e.data);break;case s.Float32:r.data=new Float32Array(e.data);break;case s.Float64:r.data=new Float64Array(e.data);break;case i.UInt64:r.data=new BigUint64Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=BigInt.asIntN(64,BigInt(e.data[t]));break;case i.Int64:r.data=new BigInt64Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=BigInt.asUintN(64,BigInt(e.data[t]))}break;case i.UInt64:case i.Int64:switch(r.imageType.componentType){case i.UInt8:r.data=new Uint8Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case i.Int8:r.data=new Int8Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case i.UInt16:r.data=new Uint16Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case i.Int16:r.data=new Int16Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case i.UInt32:r.data=new Uint32Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case i.Int32:r.data=new Int32Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case s.Float32:r.data=new Float32Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case s.Float64:r.data=new Float64Array(e.data.length);for(let t=0;t<r.data.length;t++)r.data[t]=Number(e.data[t]);break;case i.UInt64:r.data=new BigUint64Array(e.data);break;case i.Int64:r.data=new BigInt64Array(e.data)}}else{const t=e.data.constructor;r.data=new t(e.data.length),null!=r.data&&r.data.set(e.data,0)}return r};const O=class{constructor(e,t){this.fcn=t,this.workerQueue=new Array(e),this.workerQueue.fill(null),this.runInfo=[]}runTasks(e,t=null){const n={taskQueue:[],results:[],addingTasks:!1,postponed:!1,runningWorkers:0,index:0,completedTasks:0,progressCallback:t,canceled:!1};return this.runInfo.push(n),n.index=this.runInfo.length-1,{promise:new Promise(((t,r)=>{n.resolve=t,n.reject=r,n.results=new Array(e.length),n.completedTasks=0,n.addingTasks=!0,e.forEach(((e,t)=>{this.addTask(n.index,t,e)})),n.addingTasks=!1})),runId:n.index}}terminateWorkers(){for(let e=0;e<this.workerQueue.length;e++){const t=this.workerQueue[e];null!=t&&t.terminate(),this.workerQueue[e]=null}}cancel(e){const t=this.runInfo[e];null!=t&&(t.canceled=!0)}addTask(e,t,n){const r=this.runInfo[e];if(!0===(null==r?void 0:r.canceled))return r.reject("Remaining tasks canceled"),void this.clearTask(r.index);if(this.workerQueue.length>0){const a=this.workerQueue.pop();r.runningWorkers++,this.fcn(a,...n).then((n=>{var{webWorker:a}=n,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(n,["webWorker"]);if(this.workerQueue.push(a),null!==this.runInfo[e])if(r.runningWorkers--,r.results[t]=o,r.completedTasks++,null!=r.progressCallback&&r.progressCallback(r.completedTasks,r.results.length),r.taskQueue.length>0){const t=r.taskQueue.shift();this.addTask(e,t[0],t[1])}else if(!r.addingTasks&&0===r.runningWorkers){const e=r.results;r.resolve(e),this.clearTask(r.index)}})).catch((e=>{r.reject(e),this.clearTask(r.index)}))}else 0!==r.runningWorkers||r.postponed?r.taskQueue.push([t,n]):(r.postponed=!0,setTimeout((()=>{r.postponed=!1,this.addTask(r.index,t,n)}),50))}clearTask(e){this.runInfo[e].results=[],this.runInfo[e].taskQueue=[],this.runInfo[e].progressCallback=null,this.runInfo[e].canceled=null,this.runInfo[e].reject=()=>{},this.runInfo[e].resolve=()=>{}}};let S,x;function P(e){S=e}function A(){return S}function B(e){x=e}function C(){return x}const _=function(e){let t=e.slice(2+(e.lastIndexOf(".")-1>>>0));if("gz"===t.toLowerCase()){const n=e.slice(0,-3).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}else if("cbor"===t.toLowerCase()){const n=e.slice(0,-5).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}else if("zstd"===t.toLowerCase()){const n=e.slice(0,-10).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}else if("zip"===t.toLowerCase()){const n=e.slice(0,-4).lastIndexOf(".");t=e.slice(2+(n-1>>>0))}return t},U=new Map([["bmp","BMPImageIO"],["BMP","BMPImageIO"],["dcm","GDCMImageIO"],["DCM","GDCMImageIO"],["gipl","GiplImageIO"],["gipl.gz","GiplImageIO"],["hdf5","HDF5ImageIO"],["jpg","JPEGImageIO"],["JPG","JPEGImageIO"],["jpeg","JPEGImageIO"],["JPEG","JPEGImageIO"],["iwi","WasmImageIO"],["iwi.cbor","WasmImageIO"],["iwi.cbor.zstd","WasmZstdImageIO"],["lsm","LSMImageIO"],["mnc","MINCImageIO"],["MNC","MINCImageIO"],["mnc.gz","MINCImageIO"],["MNC.GZ","MINCImageIO"],["mnc2","MINCImageIO"],["MNC2","MINCImageIO"],["mgh","MGHImageIO"],["mgz","MGHImageIO"],["mgh.gz","MGHImageIO"],["mha","MetaImageIO"],["mhd","MetaImageIO"],["mrc","MRCImageIO"],["nia","NiftiImageIO"],["nii","NiftiImageIO"],["nii.gz","NiftiImageIO"],["hdr","NiftiImageIO"],["nrrd","NrrdImageIO"],["NRRD","NrrdImageIO"],["nhdr","NrrdImageIO"],["NHDR","NrrdImageIO"],["png","PNGImageIO"],["PNG","PNGImageIO"],["pic","BioRadImageIO"],["PIC","BioRadImageIO"],["tif","TIFFImageIO"],["TIF","TIFFImageIO"],["tiff","TIFFImageIO"],["TIFF","TIFFImageIO"],["vtk","VTKImageIO"],["VTK","VTKImageIO"],["isq","ScancoImageIO"],["ISQ","ScancoImageIO"],["fdf","FDFImageIO"],["FDF","FDFImageIO"]]),M=new Map([["vtk","VTKPolyDataMeshIO"],["VTK","VTKPolyDataMeshIO"],["byu","BYUMeshIO"],["BYU","BYUMeshIO"],["fsa","FreeSurferAsciiMeshIO"],["FSA","FreeSurferAsciiMeshIO"],["fsb","FreeSurferBinaryMeshIO"],["FSB","FreeSurferBinaryMeshIO"],["obj","OBJMeshIO"],["OBJ","OBJMeshIO"],["off","OFFMeshIO"],["OFF","OFFMeshIO"],["stl","STLMeshIO"],["STL","STLMeshIO"],["swc","SWCMeshIO"],["SWC","SWCMeshIO"],["iwm","WasmMeshIO"],["iwm.cbor","WasmMeshIO"],["iwm.cbor.zstd","WasmZstdMeshIO"]]);var j=n(806),D=n.n(j),E=n(444),F=n.n(E);const N=async function(e,r){let a;if(null!=e){const t=e;return a=void 0!==t.workerPromise?t.workerPromise:new(F())(e),await Promise.resolve({webworkerPromise:a,worker:e})}const o=void 0===r?t.pipelineWorkerUrl:r;let i=null;const s=t.webWorkersUrl;if(void 0!==s){console.warn("itkConfig webWorkersUrl is deprecated. Please use pipelineWorkerUrl with the full path to the pipeline worker.");const e="min-",t=s;if(t.startsWith("http")){const n=await D().get(`${t}/${e}bundles/pipeline.worker.js`,{responseType:"blob"});i=new Worker(URL.createObjectURL(n.data))}else i=new Worker(`${t}/${e}bundles/pipeline.worker.js`)}else if(null===o)i=new Worker(new URL(n.p+n.u(173),n.b));else if(o.startsWith("http")){const e=await D().get(o,{responseType:"blob"});i=new Worker(URL.createObjectURL(e.data))}else i=new Worker(o);const l=new(F())(i),u=i;return u.workerPromise=l,{webworkerPromise:l,worker:u}},z=async function(e,n,r,a){let i=e;const{webworkerPromise:s,worker:l}=await N(i);i=l;const u=`./${r}`,c=[u,"0","--memory-io","--quiet"],p=[{type:o.Image}],f=[{type:o.BinaryFile,data:{path:u,data:new Uint8Array(n)}}],d=[n];let m;"string"==typeof a?m=a:"object"==typeof a&&"string"==typeof a.mimeType&&(m=a.mimeType);let h=(await s.postMessage({operation:"readImage",config:t,mimeType:m,fileName:r,pipelinePath:"read-image",args:c,outputs:p,inputs:f},d)).outputs[0].data;return"object"!=typeof a||void 0===a.componentType&&void 0===a.pixelType||(h=k(h,a)),{image:h,webWorker:i}},R=async function(e,n,r,a){let i=e;const{webworkerPromise:s,worker:l}=await N(i);i=l;const u=`./${r}`,c=[u,"0","--memory-io","--quiet"],p=[{type:o.Mesh}],f=[{type:o.BinaryFile,data:{path:u,data:new Uint8Array(n)}}],d=[n];return{mesh:(await s.postMessage({operation:"readMesh",config:t,mimeType:a,fileName:r,pipelinePath:"read-mesh",args:c,outputs:p,inputs:f},d)).outputs[0].data,webWorker:i}},$=new Map([]),W=async function(e,t,n,r){const a=_(n);return M.has(a)||$.has(r)?await R(e,t,n,r).catch((async function(){return null!==e&&e.terminate(),await z(null,t,n,r)})):await z(e,t,n,r)};var L=n(519);const J=async function(e,t,n,r){const a=await(0,L.readAsArrayBuffer)(t);return await z(e,a,n,r)},V=async function(e,t,n,r){const a=await(0,L.readAsArrayBuffer)(t);return await R(e,a,n,r)},q=async function(e,t,n,r){const a=_(n);return M.has(a)||$.has(r)?await V(e,t,n,r).catch((async function(){return null!==e&&e.terminate(),await J(null,t,n,r)})):await J(e,t,n,r)},G=async function(e,t,n){const r=await(0,L.readAsArrayBuffer)(t),a=void 0===n?{}:Object.assign({},n);return a.mimeType=t.type,await z(e,r,t.name,a)},H=async function(e,t){const n=await(0,L.readAsArrayBuffer)(t);return await R(e,n,t.name,t.type)};var Q;const K="number"==typeof(null===(Q=globalThis.navigator)||void 0===Q?void 0:Q.hardwareConcurrency)?globalThis.navigator.hardwareConcurrency:6,X=new O(K,z),Y=async function(e,t,n,r){let a=1,o=0,i=!1;"number"==typeof t&&(a=t),void 0!==n&&(o=n),void 0!==r&&(i=r),"object"==typeof t&&(void 0!==t.zSpacing&&(a=t.zSpacing),void 0!==t.zOrigin&&(o=t.zOrigin),void 0!==t.sortedSeries&&(i=t.sortedSeries));const s=Array.from(e,(async function(e){return await(0,L.readAsArrayBuffer)(e).then((function(t){return{name:e.name,type:e.type,data:t}}))})),l=await Promise.all(s);i||l.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0));const u=[];for(let e=0;e<l.length;e++)u.push([l[e].data,l[e].name]);const c=(await X.runTasks(u).promise).map((e=>{const t=e.image;return t.imageType.dimension=3,t.size.push(1),t.spacing.push(a),t.origin.push(o),t.direction=new Float64Array(9),t.direction.fill(0),t.direction[0]=1,t.direction[4]=1,t.direction[8]=1,t}));let p=v(c);return"object"!=typeof t||void 0===t.componentType&&void 0===t.pixelType||(p=k(p,t)),{image:p,webWorkerPool:X}},Z=async function(e,t){const n=_(t.name);if(!M.has(n))return await G(e,t);try{return await H(e,t)}catch(n){return null!=e&&e.terminate(),await G(null,t)}},ee=async function(e){const t=(await D().get(`${e}/index.json`,{responseType:"json"})).data,n=await D().get(`${e}/data/data.raw`,{responseType:"arraybuffer"});t.data=b(t.imageType.componentType,n.data);const r=await D().get(`${e}/data/direction.raw`,{responseType:"arraybuffer"});return t.direction=b(s.Float64,r.data),t},te=async function(e,n,r=null){let a=e;const{webworkerPromise:i,worker:s}=await N(a);a=s;const l=new Uint8Array(n),u="./file.dcm",c=[u,"0","--memory-io"],p=[{type:o.BinaryFile,data:{data:l,path:u}}];null!=r&&(c.push("--tags-to-read"),c.push("1"),p.push({type:o.TextStream,data:{data:JSON.stringify({tags:r})}}));const f=[{type:o.TextStream}],d=(await i.postMessage({operation:"readDICOMTags",config:t,pipelinePath:"read-dicom-tags",args:c,outputs:f,inputs:p},[n])).outputs[0].data.data,m=JSON.parse(d);return{tags:new Map(m.tags),webWorker:a}},ne=async function(e,t,n=null){const r=await(0,L.readAsArrayBuffer)(t);return await te(e,r,n)};var re;const ae="number"==typeof(null===(re=globalThis.navigator)||void 0===re?void 0:re.hardwareConcurrency)?globalThis.navigator.hardwareConcurrency:4,oe=new O(ae,(async(e,n,r=!1)=>{let a=e;const{webworkerPromise:i,worker:s}=await N(a);a=s;const l=["--memory-io","--output-image","0","--output-filenames","1","--input-images"];n.forEach((e=>{l.push(`./${e.path}`)})),r&&l.push("--single-sorted-series");const u=[{type:o.Image},{type:o.TextStream}],c=n.map((e=>({type:o.BinaryFile,data:e}))),p=n.map((e=>e.data.buffer)),f={operation:"readDICOMImageSeries",config:t,fileDescriptions:n,singleSortedSeries:r,pipelinePath:"ReadDICOMImageFileSeries",args:l,outputs:u,inputs:c},d=await i.postMessage(f,p),m=d.outputs[0].data,h=d.outputs[1].data.data.split("\0");if(null==h||h.pop(),void 0===m.metadata){const e=new Map;e.set("OrderedFileNames",h),m.metadata=e}else m.metadata.set("OrderedFileNames",h);return{image:d.outputs[0].data,webWorker:a}})),ie=async(e,t,n)=>{let r,a=!1;"boolean"==typeof t&&(a=t),void 0!==n&&(r=n),"object"==typeof t&&(void 0!==t.singleSortedSeries&&(a=t.singleSortedSeries),void 0!==t.fileNames&&(r=t.fileNames));const o=void 0!==r&&r.length===e.length,i=e.map(((e,t)=>({path:o?r[t]:`${t}.dcm`,data:new Uint8Array(e)})));if(a){const e=[];for(let t=0;t<i.length;t+=8){const n=i.slice(t,t+8);e.push([n,a])}const n=(await oe.runTasks(e).promise).map((e=>e.image));let r=v(n);return"object"!=typeof t||void 0===t.componentType&&void 0===t.pixelType||(r=k(r,t)),{image:r,webWorkerPool:oe}}{const e=[[i,a]];let n=(await oe.runTasks(e).promise)[0].image;return"object"!=typeof t||void 0===t.componentType&&void 0===t.pixelType||(n=k(n,t)),{image:n,webWorkerPool:oe}}},se=async(e,t)=>{const n=Array.from(e,(async function(e){return await(0,L.readAsArrayBuffer)(e)})),r=await Promise.all(n);let a={};"object"==typeof t&&(a=Object.assign({},t)),"boolean"==typeof t&&(a.singleSortedSeries=t);const o=Array.from(e,(e=>e.name));return a.fileNames=o,await ie(r,a)},le="function"==typeof globalThis.SharedArrayBuffer,ue=function(e){let t=null;return void 0!==e.buffer?t=e.buffer:void 0!==e.byteLength&&(t=e),t&&le&&t instanceof SharedArrayBuffer?null:t},ce=async function(e,n,r,a,i){if("boolean"==typeof n)throw new Error("useCompression is now at the last argument position in itk-wasm");let s="";"string"==typeof a&&(s=a);let l=!1;"boolean"==typeof i&&(l=i),"object"==typeof a&&void 0!==a.useCompression&&(l=a.useCompression);let u=e;const{webworkerPromise:c,worker:p}=await N(u);u=p;const f=`./${r}`,d=["0",f,"--memory-io","--quiet"];l&&d.push("--use-compression");const m=[{data:{path:f},type:o.BinaryFile}];let h=n;"object"!=typeof a||void 0===a.componentType&&void 0===a.pixelType||(h=k(n,a));const y=[{type:o.Image,data:h}],g=[];let b=ue(n.data);return null!=b&&g.push(b),b=ue(n.direction),null!=b&&g.push(b),{arrayBuffer:(await c.postMessage({operation:"writeImage",config:t,mimeType:s,fileName:r,pipelinePath:"WriteImage",args:d,outputs:m,inputs:y},g)).outputs[0].data.data.buffer,webWorker:u}},pe=function(e){const t=[];return null!=e.points&&t.push(e.points.buffer),null!=e.pointData&&t.push(e.pointData.buffer),null!=e.cells&&t.push(e.cells.buffer),null!=e.cellData&&t.push(e.cellData.buffer),t},fe=async function(e,n,r,a,i){if("useCompression"in n||"binaryFileType"in n)throw new Error("options are now in the last argument position in itk-wasm");let s=e;const{webworkerPromise:l,worker:u}=await N(s);s=u;const c=`./${r}`,p=["0",c,"--memory-io","--quiet"];!0===(null==i?void 0:i.useCompression)&&p.push("--use-compression"),!0===(null==i?void 0:i.binaryFileType)&&p.push("--binary-file-type");const f=[{data:{path:c},type:o.BinaryFile}],d=[{type:o.Mesh,data:n}],m=pe(n);return{arrayBuffer:(await l.postMessage({operation:"writeMesh",config:t,mimeType:a,fileName:r,pipelinePath:"WriteMesh",args:p,outputs:f,inputs:d},m)).outputs[0].data.data.buffer,webWorker:s}},de=async function(e,t,n,r="",a=!1){if("boolean"==typeof t)throw new Error("useCompression is now the argument position in itk-wasm");const o=_(n);return M.has(o)||$.has(r)?await fe(e,t,n,r,{useCompression:a}).catch((async function(){return null!=e&&e.terminate(),await ce(null,t,n,r,a)})):await ce(e,t,n,r,a)},me=async function(e,n){let r=e;const{webworkerPromise:a,worker:i}=await N(r);r=i;const s=[{type:o.PolyData}],l=[{type:o.Mesh,data:n}],u=pe(n);return{polyData:(await a.postMessage({operation:"meshToPolyData",config:t,pipelinePath:"mesh-to-polydata",args:["0","0","--memory-io"],outputs:s,inputs:l},u)).outputs[0].data,webWorker:r}},he=async function(e,n){let r=e;const{webworkerPromise:a,worker:i}=await N(r);r=i;const s=[{type:o.Mesh}],l=[{type:o.PolyData,data:n}],u=function(e){const t=[];return null!=e.points&&t.push(e.points.buffer),null!=e.vertices&&t.push(e.vertices.buffer),null!=e.lines&&t.push(e.lines.buffer),null!=e.polygons&&t.push(e.polygons.buffer),null!=e.triangleStrips&&t.push(e.triangleStrips.buffer),null!=e.pointData&&t.push(e.pointData.buffer),null!=e.cellData&&t.push(e.cellData.buffer),t}(n);return{mesh:(await a.postMessage({operation:"polyDataToMesh",config:t,pipelinePath:"polydata-to-mesh",args:["0","0","--memory-io"],outputs:s,inputs:l},u)).outputs[0].data,webWorker:r}},ye="function"==typeof globalThis.SharedArrayBuffer,ge=new TextEncoder,be=new TextDecoder("utf-8");function we(e,t){const n=e.fs_open(t,"r"),r=e.fs_stat(t).size;let a=null;a=ye?new SharedArrayBuffer(r):new ArrayBuffer(r);const o=new Uint8Array(a);return e.fs_read(n,o,0,r,0),e.fs_close(n),o}function ve(e,t,n){let r=null;r=ye?new SharedArrayBuffer(n):new ArrayBuffer(n);const a=new Uint8Array(r),o=new Uint8Array(e.HEAPU8.buffer,t,n);return a.set(o),a}function Ie(e,t,n,r){let a=0;return null!==t&&(a=e.ccall("itk_wasm_input_array_alloc","number",["number","number","number","number"],[0,n,r,t.buffer.byteLength]),e.HEAPU8.set(new Uint8Array(t.buffer),a)),a}function Te(e,t,n){const r=JSON.stringify(t),a=e.ccall("itk_wasm_input_json_alloc","number",["number","number","number"],[0,n,r.length]);e.writeAsciiToMemory(r,a,!1)}function ke(e,t,n,r){const a=e.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,t,n]),o=e.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,t,n]),i=ve(e,a,o);return b(r,i.buffer)}function Oe(e,t){const n=e.ccall("itk_wasm_output_json_address","number",["number","number"],[0,t]),r=e.AsciiToString(n);return JSON.parse(r)}const Se=new Map,xe=async function(e,n,r,a,u,c){var p;if(!1===e){return function(e,t,n,r){null!=r&&r.length>0&&r.forEach((function(t,n){switch(t.type){case o.TextStream:{const r=ge.encode(t.data.data),a=Ie(e,r,n,0),o={size:r.buffer.byteLength,data:`data:application/vnd.itk.address,0:${a}`};Te(e,o,n);break}case o.BinaryStream:{const r=t.data.data,a=Ie(e,r,n,0),o={size:r.buffer.byteLength,data:`data:application/vnd.itk.address,0:${a}`};Te(e,o,n);break}case o.TextFile:case o.BinaryFile:e.fs_writeFile(t.data.path,t.data.data);break;case o.Image:{const r=t.data,a=Ie(e,r.data,n,0),o=Ie(e,r.direction,n,1),i={imageType:r.imageType,name:r.name,origin:r.origin,spacing:r.spacing,direction:`data:application/vnd.itk.address,0:${o}`,size:r.size,data:`data:application/vnd.itk.address,0:${a}`,metadata:JSON.stringify(Array.from(r.metadata.entries()))};Te(e,i,n);break}case o.Mesh:{const r=t.data,a=Ie(e,r.points,n,0),o=Ie(e,r.cells,n,1),i=Ie(e,r.pointData,n,2),s=Ie(e,r.cellData,n,3),l={meshType:r.meshType,name:r.name,numberOfPoints:r.numberOfPoints,points:`data:application/vnd.itk.address,0:${a}`,numberOfCells:r.numberOfCells,cells:`data:application/vnd.itk.address,0:${o}`,cellBufferSize:r.cellBufferSize,numberOfPointPixels:r.numberOfPointPixels,pointData:`data:application/vnd.itk.address,0:${i}`,numberOfCellPixels:r.numberOfCellPixels,cellData:`data:application/vnd.itk.address,0:${s}`};Te(e,l,n);break}case o.PolyData:{const r=t.data,a=Ie(e,r.points,n,0),o=Ie(e,r.vertices,n,1),i=Ie(e,r.lines,n,2),s=Ie(e,r.polygons,n,3),l=Ie(e,r.triangleStrips,n,4),u=Ie(e,r.pointData,n,5),c=Ie(e,r.pointData,n,6),p={polyDataType:r.polyDataType,name:r.name,numberOfPoints:r.numberOfPoints,points:`data:application/vnd.itk.address,0:${a}`,verticesBufferSize:r.verticesBufferSize,vertices:`data:application/vnd.itk.address,0:${o}`,linesBufferSize:r.linesBufferSize,lines:`data:application/vnd.itk.address,0:${i}`,polygonsBufferSize:r.polygonsBufferSize,polygons:`data:application/vnd.itk.address,0:${s}`,triangleStripsBufferSize:r.triangleStripsBufferSize,triangleStrips:`data:application/vnd.itk.address,0:${l}`,numberOfPointPixels:r.numberOfPointPixels,pointData:`data:application/vnd.itk.address,0:${u}`,numberOfCellPixels:r.numberOfCellPixels,cellData:`data:application/vnd.itk.address,0:${c}`};Te(e,p,n);break}case l.Text:case l.Binary:e.fs_writeFile(t.path,t.data);break;case l.Image:{const n=t.data,r={imageType:n.imageType,name:n.name,origin:n.origin,spacing:n.spacing,direction:"data:application/vnd.itk.path,data/direction.raw",size:n.size,data:"data:application/vnd.itk.path,data/data.raw"};if(e.fs_mkdirs(`${t.path}/data`),e.fs_writeFile(`${t.path}/index.json`,JSON.stringify(r)),null===n.data)throw Error("image.data is null");e.fs_writeFile(`${t.path}/data/data.raw`,new Uint8Array(n.data.buffer)),e.fs_writeFile(`${t.path}/data/direction.raw`,new Uint8Array(n.direction.buffer));break}case l.Mesh:{const n=t.data,r={meshType:n.meshType,name:n.name,numberOfPoints:n.numberOfPoints,points:"data:application/vnd.itk.path,data/points.raw",numberOfPointPixels:n.numberOfPointPixels,pointData:"data:application/vnd.itk.path,data/pointData.raw",numberOfCells:n.numberOfCells,cells:"data:application/vnd.itk.path,data/cells.raw",numberOfCellPixels:n.numberOfCellPixels,cellData:"data:application/vnd.itk.path,data/cellData.raw",cellBufferSize:n.cellBufferSize};if(e.fs_mkdirs(`${t.path}/data`),e.fs_writeFile(`${t.path}/index.json`,JSON.stringify(r)),r.numberOfPoints>0){if(null===n.points)throw Error("mesh.points is null");e.fs_writeFile(`${t.path}/data/points.raw`,new Uint8Array(n.points.buffer))}if(r.numberOfPointPixels>0){if(null===n.pointData)throw Error("mesh.pointData is null");e.fs_writeFile(`${t.path}/data/pointData.raw`,new Uint8Array(n.pointData.buffer))}if(r.numberOfCells>0){if(null===n.cells)throw Error("mesh.cells is null");e.fs_writeFile(`${t.path}/data/cells.raw`,new Uint8Array(n.cells.buffer))}if(r.numberOfCellPixels>0){if(null===n.cellData)throw Error("mesh.cellData is null");e.fs_writeFile(`${t.path}/data/cellData.raw`,new Uint8Array(n.cellData.buffer))}break}default:throw Error("Unsupported input InterfaceType")}})),e.resetModuleStdout(),e.resetModuleStderr();let a=0;try{a=e.callMain(t.slice())}catch(t){throw"number"==typeof t&&(console.log("Exception while running pipeline:"),console.log("stdout:",e.getModuleStdout()),console.error("stderr:",e.getModuleStderr()),void 0!==e.getExceptionMessage?console.error("exception:",e.getExceptionMessage(t)):console.error("Build module in Debug mode for exception message information.")),t}const u=e.getModuleStdout(),c=e.getModuleStderr(),p=[];return null!=n&&n.length>0&&0===a&&n.forEach((function(t,n){let r=null;switch(t.type){case o.TextStream:{const t=e.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,n,0]),a=e.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,n,0]),o=new Uint8Array(e.HEAPU8.buffer,t,a);r={data:be.decode(o)};break}case o.JsonObject:{const t=e.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,n,0]),a=e.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,n,0]),o=new Uint8Array(e.HEAPU8.buffer,t,a);r={data:JSON.parse(be.decode(o))};break}case o.BinaryStream:{const t=e.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,n,0]),a=e.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,n,0]);r={data:ve(e,t,a)};break}case o.TextFile:r={path:t.data.path,data:e.fs_readFile(t.data.path,{encoding:"utf8"})};break;case o.BinaryFile:r={path:t.data.path,data:we(e,t.data.path)};break;case o.Image:{const t=Oe(e,n);t.data=ke(e,n,0,t.imageType.componentType),t.direction=ke(e,n,1,s.Float64),t.metadata=new Map(t.metadata),r=t;break}case o.Mesh:{const t=Oe(e,n);t.numberOfPoints>0?t.points=ke(e,n,0,t.meshType.pointComponentType):t.points=b(t.meshType.pointComponentType,new ArrayBuffer(0)),t.numberOfCells>0?t.cells=ke(e,n,1,t.meshType.cellComponentType):t.cells=b(t.meshType.cellComponentType,new ArrayBuffer(0)),t.numberOfPointPixels>0?t.pointData=ke(e,n,2,t.meshType.pointPixelComponentType):t.pointData=b(t.meshType.pointPixelComponentType,new ArrayBuffer(0)),t.numberOfCellPixels>0?t.cellData=ke(e,n,3,t.meshType.cellPixelComponentType):t.cellData=b(t.meshType.cellPixelComponentType,new ArrayBuffer(0)),r=t;break}case o.PolyData:{const t=Oe(e,n);t.numberOfPoints>0?t.points=ke(e,n,0,s.Float32):t.points=new Float32Array,t.verticesBufferSize>0?t.vertices=ke(e,n,1,i.UInt32):t.vertices=new Uint32Array,t.linesBufferSize>0?t.lines=ke(e,n,2,i.UInt32):t.lines=new Uint32Array,t.polygonsBufferSize>0?t.polygons=ke(e,n,3,i.UInt32):t.polygons=new Uint32Array,t.triangleStripsBufferSize>0?t.triangleStrips=ke(e,n,4,i.UInt32):t.triangleStrips=new Uint32Array,t.numberOfPointPixels>0?t.pointData=ke(e,n,5,t.polyDataType.pointPixelComponentType):t.pointData=b(t.polyDataType.pointPixelComponentType,new ArrayBuffer(0)),t.numberOfCellPixels>0?t.cellData=ke(e,n,6,t.polyDataType.cellPixelComponentType):t.cellData=b(t.polyDataType.cellPixelComponentType,new ArrayBuffer(0)),r=t;break}case l.Text:if(void 0===t.path)throw new Error("output.path not defined");r=e.fs_readFile(t.path,{encoding:"utf8"});break;case l.Binary:if(void 0===t.path)throw new Error("output.path not defined");r=we(e,t.path);break;case l.Image:{if(void 0===t.path)throw new Error("output.path not defined");const n=e.fs_readFile(`${t.path}/index.json`,{encoding:"utf8"}),a=JSON.parse(n),o=we(e,`${t.path}/data/data.raw`);a.data=b(a.imageType.componentType,o.buffer);const i=we(e,`${t.path}/data/direction.raw`);a.direction=b(s.Float64,i.buffer),r=a;break}case l.Mesh:{if(void 0===t.path)throw new Error("output.path not defined");const n=e.fs_readFile(`${t.path}/index.json`,{encoding:"utf8"}),a=JSON.parse(n);if(a.numberOfPoints>0){const n=we(e,`${t.path}/data/points.raw`);a.points=b(a.meshType.pointComponentType,n.buffer)}else a.points=b(a.meshType.pointComponentType,new ArrayBuffer(0));if(a.numberOfPointPixels>0){const n=we(e,`${t.path}/data/pointData.raw`);a.pointData=b(a.meshType.pointPixelComponentType,n.buffer)}else a.pointData=b(a.meshType.pointPixelComponentType,new ArrayBuffer(0));if(a.numberOfCells>0){const n=we(e,`${t.path}/data/cells.raw`);a.cells=b(a.meshType.cellComponentType,n.buffer)}else a.cells=b(a.meshType.cellComponentType,new ArrayBuffer(0));if(a.numberOfCellPixels>0){const n=we(e,`${t.path}/data/cellData.raw`);a.cellData=b(a.meshType.cellPixelComponentType,n.buffer)}else a.cellData=b(a.meshType.cellPixelComponentType,new ArrayBuffer(0));r=a;break}default:throw Error("Unsupported output InterfaceType")}const a={type:t.type,data:r};p.push(a)})),{returnValue:a,stdout:u,stderr:c,outputs:p}}(await async function(e){let n=e,r=e;if("string"!=typeof e&&(n=new URL(e.href),r=n.href),Se.has(r))return Se.get(r);{const n=await async function(e,t){let n="unknown";n="string"!=typeof e?e.href:e.startsWith("http")?e:`${t}/${e}`,n.endsWith(".js")&&(n=n.substring(0,n.length-3)),n.endsWith(".wasm")&&(n=n.substring(0,n.length-5));const r=`${n}.wasm`,a=(await D().get(r,{responseType:"arraybuffer"})).data,o=`${n}.js`;return(await import(o)).default({wasmBinary:a})}(e,t.pipelinesUrl);return Se.set(r,n),n}}(n.toString()),r,a,u)}let f=e;const d=null==c?void 0:c.pipelineWorkerUrl,m="string"!=typeof d&&void 0!==(null==d?void 0:d.href)?d.href:d,{webworkerPromise:h,worker:y}=await N(f,m);f=y;const g=[];null!=u&&u.length>0&&u.forEach((function(e){if(e.type===o.BinaryStream){const t=e.data.data,n=ue(t);null!=n&&g.push(n)}else if(e.type===o.BinaryFile){const t=e.data.data,n=ue(t);null!=n&&g.push(n)}else if(e.type===o.Image){const t=e.data;if(null===t.data)throw Error("image data cannot be null");let n=ue(t.data);null!=n&&g.push(n),n=ue(t.direction),null!=n&&g.push(n)}else if(e.type===l.Binary){const t=ue(e.data);null!=t&&g.push(t)}else if(e.type===l.Image){const t=e.data;if(null===t.data)throw Error("image data cannot be null");let n=ue(t.data);null!=n&&g.push(n),n=ue(t.direction),null!=n&&g.push(n)}else if(e.type===l.Mesh){const t=e.data;if(null!=t.points){const e=ue(t.points);null!=e&&g.push(e)}if(null!=t.pointData){const e=ue(t.pointData);null!=e&&g.push(e)}if(null!=t.cells){const e=ue(t.cells);null!=e&&g.push(e)}if(null!=t.cellData){const e=ue(t.cellData);null!=e&&g.push(e)}}}));const w=null!==(p=null==c?void 0:c.pipelineBaseUrl)&&void 0!==p?p:"pipelinesUrl",v="string"!=typeof w&&void 0!==(null==w?void 0:w.href)?w.href:w,I=await h.postMessage({operation:"runPipeline",config:t,pipelinePath:n.toString(),pipelineBaseUrl:v,args:r,outputs:a,inputs:u},g);return{returnValue:I.returnValue,stdout:I.stdout,stderr:I.stderr,outputs:I.outputs,webWorker:f}}})(),r})()));
//# sourceMappingURL=itk-wasm.min.js.map